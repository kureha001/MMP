# ６章 オブジェクト

オブジェクトは、コントローラ制御配下の有無で大別されます。
**コントローラ制御配下ではないオブジェクト**：
#### (制御系)
ゲーム全体の**進行を制御**するオブジェクトです。
**コントローラ**がこれにあたります。

#### (データ系)
さまざまな箇所で使う**データ集**のオブジェクトです。
本システムでは、**データセット**オブジェクトと呼びます。
**エンティティ系･管理系のオブジェクトをコンテナ**として持ちます。

#### (コントローラ制御)
1. **エンティティ系**<br>
姿かたちがあり、プレイヤーからは**理解しやすい**オブジェクトです。ゲームに登場する**キャラクタなど**がこれに当たります。
1. **処理フロー系**<br>
姿かたちはなく、画面ごとの**処理の流れ･状況管理**を制御するオブジェクトです。**シーン**がこれにあたります。

---
### 6.1 コントローラ(制御系)
Pyxelのフレームごとに、以下の順序で処理します。
この順序は、**プロセス**という単位で区切ります。
プロセスでは、対象オブジェクトがもつ**プロセス用の機能**を実行します。

#### (変更コントーラ)
- **入力走査**<br>
MMPからの入力を収集し、後続で利用できるように準備
- **プロセス実行**<br>
動作プロセスなど実行し、データを変更

#### (結果コントーラ)
- **プロセス実行**<br>
動作プロセスなど実行し、データを変更
- **表現**<br>
エンティティ系オブジェクトの状態を画面表示や物理的な物で表現
- **遷移**<br>
処理フロー系ブジェクトのシーン遷移を準備


---
### 6.2 データセット(データ系)
～執筆中～

---
### 6.3 キャラクタ(エンティティ系)
様々なキャラクタが考えられます。
敵・味方(自分)/敵のみ/自分のみ...など、さまざまです。
**コントローラ制御配下**なので、該当する**プロセス機能を要素クラス**として持ちます。
処理内容ごとにプロセス機能を用意するので、**多くのプロセス機能**(移動/発射/衝突･命中/通過など)を持つ場合があります。

---
### 6.4 シーン(処理フロー系)

**コントローラ制御配下**なので、該当する**プロセス機能を要素クラス**として持ちます。
プロセス機能は**表現･遷移**の2つを持ちます。

シーンオブジェクトは以下の3つがあります。
#### (タイトル画面)
プレイ画面の事前設定と、プレイ開始を指示します。
開始指示をすると、必要なリソースを用意し、次のシーン(プレイ画面)に移行します。
1. **表現プロセス**
     - オープニングを表現
     - プレイ条件の設定を受付
     - プレイ開始の指示を受付
     - プレイ画面への遷移要否を判定
1. **遷移プロセス**
     - プレイ画面への遷移を準備
</br>

#### (プレイ画面)
プレイヤーが生存中、ゲームを進行します。
生存条件を満たさない場合、次のシーン(終了画面)へ移行します。
1. **表現プロセス**：<br>
     - ユーザにゲームプレイを提供
     - 終了画面への遷移要否を判定
1. **遷移プロセス**
     - 終了画面への遷移を準備
</br>

#### (終了画面)
しばらく、エンディングの画面表示をします。
その後、不要になったリソースを解放し、次のシーン(タイトル画面)へ移行します。
1. **表現プロセス**
   - エンディングを表現
   - タイトル画面への遷移要否を判定
1. **遷移プロセス**
   - タイトル画面への遷移を準備

> **<<シーン遷移の詳細>>**
> シーンの遷移は、表現プロセスにて、データセットに**要否を事前にセット**し、**遷移プロセスで実行**します。
> 遷移準備では、**次のシーン**に必要な**リソース生成･初期値設定**をおこないます。
> つまり初期処理は、**1つ前のシーン**が担当します。