# P特殊 README

## 概要
`P特殊.py` は、プレイヤーに特殊な効果を与える「特殊アイテム」を出現させるサブプロセスです。他の出現サブプロセスと異なり、出現させるアイテムの選定にゲーム内状態（発動中の効果）を考慮する高度なロジックを持っています。

## 主な特徴
- **アイテム選出関数**: `act特殊_選定()` により効果IDを抽選
- **効果の種類**: スコア倍増、移動速度上昇などの一時効果
- **使用DB**:
  - `/キャラクタ/敵機/DB.py`：表示用の敵機定義（アイテム機体）
  - `/特殊効果/DB.py`：アイテムID・効果ID・出現率などの定義

## 使用ID
- **アイテムID**: 選出された効果に基づいて決定
- **機体ID**: 常に `機体ID.アイテム`（見た目は共通）

## 処理の流れ
1. `act特殊_選定()` により、出現可能な特殊アイテム候補を重み付きで選出
2. 敵機生成用の情報に `アイテムID` を埋め込む
3. `敵機生成()` を呼び出して画面に出現させる

## `act特殊_選定()` の概要
- 出現候補は難易度と `アイテムDB` に基づいて抽出
- 効果がすでに発動中である場合は候補から除外
- 永続型の効果と重複しないよう設計されている

## 注意点
- `main.DB.obj特殊効果` を参照し、発動中の効果と照合する
- `アイテムID` によって適用される効果が異なる
- 出現率は `アイテムDB` にて定義され、抽選に反映される

## 関連ファイル
- `/更新コントローラ/P出現/P特殊.py`：出現処理
- `/更新コントローラ/P出現/act特殊_選定.py`：アイテム選定処理
- `/キャラクタ/敵機/DB.py`：`機体ID.アイテム`
- `/特殊効果/DB.py`：`アイテムID` と `効果ID` の対応と出現率
