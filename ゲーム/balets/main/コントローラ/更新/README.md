# 更新コントローラの概要

本章では、ゲーム内でフレーム単位で動作する各更新コントローラの概要について記述します。これらはすべて `main.py` 内のフレーム処理ループから呼び出され、各種オブジェクトの更新や判定、描画に関わる処理を担当します。

---

## 1. P出現（出現プロセス）

敵機やアイテムの出現を制御するプロセスです。現在の難易度やステージ進行状況に応じて、出現可能なオブジェクトを選定し、画面外に配置して生成します。

- 難易度に応じた出現フィルタリング
- 敵機／アイテムの分類コードにより出現対象を判定
- 出現パターンの管理もここで行われる

---

## 2. P移動（移動プロセス）

すべてのオブジェクトの移動処理を一括で制御します。オブジェクトごとに設定された移動速度や挙動に基づき、座標を更新します。

- Y/X方向の速度による移動
- 左右反転や反復運動などの特殊移動パターンの処理
- 範囲外移動時の削除判定も担当

---

## 3. P衝突（衝突判定プロセス）

オブジェクト間の接触を判定し、必要な効果処理（ダメージ／スコア加算／アイテム取得など）を発動します。オブジェクトごとの当たり判定領域を参照し、矩形での衝突を判定します。

- 自機・敵機・弾・アイテムの接触を検出
- 衝突後の爆発生成・シールド減少などの処理を呼び出す
- 判定対象外のペアはスキップ（例：自機弾と自機）

---

## 4. P発射（弾発射プロセス）

敵機の弾発射処理を一括で制御します。発射間隔や同時弾数、角度調整など、敵機DBに記載された情報を元に弾を生成します。

- FPS単位で発射間隔をチェック
- 同時発射数や角度ずらしによる弾幕制御
- 自機狙い／円状発射など複数のロジックに対応

---

## 5. P削除（オブジェクト削除プロセス）

画面外に出たオブジェクトや、一定の条件を満たしたオブジェクト（寿命終了など）を削除します。処理対象のカテゴリに応じて、それぞれの `情報クラス` 内の状態を参照して削除を判断します。

- 爆発やエフェクトの寿命管理
- 範囲外オブジェクトの削除
- フラグ付きオブジェクトの削除（撃墜済など）

---

## 6. P描画（描画プロセス）

各カテゴリごとにスプライト描画命令をまとめて実行します。スプライトIDやアニメーション状態を `仕様クラス` から取得し、画面に描画します。

- 表示順序（自機→敵機→弾→爆発など）の制御
- スプライトのアニメーション更新
- 点滅・回転などの演出も含む
