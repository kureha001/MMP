# 📘コマンド リファレンス
### §ＰＷＭ出力
最終更新日：2025年11月14日

---
16チャンネルのPCA9685を**最大8個**、**最大128個**のPWM出力を制御できます。   
プリセットの情報は、クライアント毎に独立しています。   

---
### 0. 情報
#### 0-1. 接続状況
**書式：`PWM/INFO/CONNECT`:`dev`!**
|引数|値|解説|
|----|--|----|
|－  |－|－  |

|種別|戻値   |解説             |
|----|-------|-----------------|
|正常|`XXXX!`|接続デバイス数   |
|異常|`#...!`|`Ⅰ.§戻値`を参照|


---
### 1. 基本
#### 1-1. PWM出力
**書式：`PWM/OUTPUT`:`ch_from`:`pwm`!**
|引数|値|解説|
|----|--|----|
|`ch` |0～127 |チャンネルID(開始)|
|`pwm`|0～4095|出力値(PWM値)|

|種別|戻値   |解説             |
|----|-------|-----------------|
|正常|`!!!!!`|とくになし       |
|異常|`#...!`|`Ⅰ.§戻値`を参照|


---
### 2. 角度指定
クライアント毎に独立した制御ができます。

#### 2-1. プリセット登録
**書式：`PWM/ANGLE/SETUP`:`ch_from`:`ch_to`:`deg_end`:`pwm_min`:`pwm_max`!**
|引数|値|解説|
|----|--|----|
|`ch_from`   |0～127|チャンネルID(開始)|
|`ch_to`     |0～127,-1|チャンネルID(終了)|
|`deg_max`   |2～360|最大角度|
|`pwm_min`   |0～4095|PWM値(0度)|
|`pwm_max`   |0～4095|PWM値(最大角度)|

|種別|戻値   |解説             |
|----|-------|-----------------|
|正常|`!!!!!`|とくになし       |
|異常|`#...!`|`Ⅰ.§戻値`を参照|


---
#### 2-2. プリセット削除
**書式：`PWM/ANGLE/DELETE`:`ch_from`:`ch_to`!**
|引数|値|解説|
|----|--|----|
|`ch_from`|0～127   |チャンネルID(開始)|
|`ch_to`  |0～127,-1|チャンネルID(終了)|

|種別|戻値   |解説             |
|----|-------|-----------------|
|正常|`!!!!!`|とくになし       |
|異常|`#...!`|`Ⅰ.§戻値`を参照|

---
#### 2-3. PWM出力
**書式：`PWM/ANGLE/OUTPUT`:`ch`:`deg`!**
|引数|値|解説|
|----|--|----|
|`ch`   |0～127|チャンネルID|
|`angle`|0～360|出力角度    |

|種別|戻値   |解説             |
|----|-------|-----------------|
|正常|`XXXX!`|出力したPWM値    |
|異常|`#...!`|`Ⅰ.§戻値`を参照|

---
### 3. 回転型サーボ
クライアント毎に独立した制御ができます。

#### 3-1. プリセット登録
**書式：`PWM/ROTATE/SETUP`:`ch_from`:`ch_to`:`righ_stop`:`righ_max`:`left_stop`:`left_max`!**
|引数|値|解説|
|----|--|----|
|`ch_from`   |0～127|チャンネルID(開始)|
|`ch_to`     |0～127,-1|チャンネルID(終了)|t
|`righ_stop` |0～4095|PWM値(右回りの停止)|
|`righ_max`  |0～4095|PWM値(右回りの最大)|
|`left_stop` |0～4095|PWM値(左回りの停止)|
|`left_max`  |0～4095|PWM値(左回りの最大)|

|種別|戻値   |解説             |
|----|-------|-----------------|
|正常|`!!!!!`|とくになし       |
|異常|`#...!`|`Ⅰ.§戻値`を参照|

---
#### 3-2. プリセット削除
**書式：`PWM/ROTATE/DELETE`:`ch_from`:`ch_to`!**
|引数|値|解説|
|----|--|----|
|`ch_from`|0～127   |チャンネルID(開始)|
|`ch_to`  |0～127,-1|チャンネルID(終了)|

|種別|戻値   |解説             |
|----|-------|-----------------|
|正常|`!!!!!`|とくになし       |
|異常|`#...!`|`Ⅰ.§戻値`を参照|

---
#### 3-3. PWM出力
**書式：`PWM/ROTATE/OUTPUT`:`ch`:`rate`!**
|引数|値|解説|
|----|--|----|
|`ch`  |0～127   |チャンネルID|
|`rate`|-100～100|逆転～正転のパーセンテージ<br>(値はオフセット処理)|

|種別|戻値   |解説             |
|----|-------|-----------------|
|正常|`XXXX!`|出力したPWM値    |
|異常|`#...!`|`Ⅰ.§戻値`を参照|