# IchigoJamで扱うには

---
IchigoJam Type-R/Pで、MMPを利用する方法を解説します。

---
## 接続表
| IchigoJam  | 接続 | MMP                |
| ---------- | ---- | ------------------ |
| RXD        | ←   | GPIO0 (Serial1 TX) |
| TXD        | →   | GPIO1 (Serial1 RX) |
| GND        | ←→ | GND                |
| 3.3V       | →   | 3.3V               |

---
## 通信設定（IchigoJam側）
IchigoJam は PRINT/? で送信、INKEY() で受信します。
送受信は 1バイトずつ行われ、**終端に"!" を必ず付ける仕様(ファームウェア)**。
| 項目           | 設定値           |
| -------------- | ---------------- |
| 通信速度       | 115200 bps(推奨) |
| データ長       | 8ビット          |
| パリティ       | なし             |
| ストップビット | 1ビット          |
| 改行コード     | CR+LF            |

## ボーレートの設定方法
BPS 数1{,数2}

- 数１：シリアル通信速度を変更する。
  - **0**：初期値の115,200bps
  - **-1**：57600bps
  - **-2**：38400bps
  - **-100以下**：-100倍のbps
    例) BPS -9216 は 921600 bps

- 数2：I2Cの通信速度設定（単位kHz）
  - **0**：0:デフォルト400kHz)

---
## サンプルコード概説

### 00_ステータス取得.BAS
[→ソースコード](./サンプル/00_ステータス取得.BAS)

以下のシステム状況を取得・表示します。
- ファームウェア
- ＰＷＭ機器(pca9685)
- ＭＰ３機器(DFPlayer)

### 10_デジタル入出力.BAS
[→ソースコード](./サンプル/10_デジタル入出力.BAS)

以下のシステム状況を取得・表示します。
- ファームウェア
- ＰＷＭ機器(pca9685)
- ＭＰ３機器(DFPlayer)

### 11_アナログ入力.BAS
[→ソースコード](./サンプル/11_アナログ入力.BAS)

LANケーブルで接続したアナログ値を取得・表示します。
- プレイヤー１のポートを読みとります
- ４つのスイッチを読み取ります

### 20_PWM.BAS
[→ソースコード](./サンプル/20_PWM.BAS)

PWM出力します。
- Ch0にパルスを出力します
- Ch1に5V(一定)を出力します

### 30_MP3.BAS
[→ソースコード](./サンプル/30_MP3.BAS)

複数のMP3ファイルを連続して再生したり、停止したりします。

## 注意事項
- 文字列送信には PRINT/?、受信には INKEY() を使用
- コマンド終端 "!" を忘れずに
- HEX$(値,桁数) を使い 16進数形式で送信 ※桁数はファームウェアのコマンド一覧を参照
- 受信数値は適宜、VAL() を使い 16進文字列から数値変換