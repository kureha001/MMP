# 敵機・ボスキャラ データベース定義

本ドキュメントは、ファイル `/キャラクタ/敵機/DB.py` に定義された、敵機およびボスキャラクターの各種データベース構造について解説します。

---

## 1. 機体ID（敵機の識別ID）

```python
class 機体ID(IntEnum):
    機雷 = 0
    板1, 板2, 岩
    ザコ機1, ゆらり1, 円盤型1
    ザコ機2, ゆらり2, 円盤型2
    ザコ機3, ゆらり3, 円盤型3
    アイテム
```

- `auto()` により自動で連番が割り当てられます。
- 敵機・障害物・アイテムなどを識別します。

---

## 2. 敵機DB

```python
敵機DB = {
    機体ID.X: (得点, (Y速度, X速度, 反転間隔), (発射間隔, 発射速度, 同時数, 角度), (弾攻撃力, 体当たり威力, シールド))
}
```

### 各フィールドの説明：

| 項目 | 内容 |
|------|------|
| 得点 | 撃破時のスコア |
| Y速度 | 垂直移動速度 |
| X速度 | 水平移動速度 |
| 反転間隔 | 横方向の反転間隔（フレーム単位） |
| 発射間隔 | 弾を撃つ周期（0で発射しない） |
| 発射速度 | 弾の移動速度 |
| 同時数 | 同時に出す弾の数（最大8程度） |
| 角度 | 発射方向の角度補正 |
| 弾攻撃力 | 弾が命中した際の攻撃力（負値で貫通） |
| 体当たり威力 | 接触ダメージ |
| シールド | 耐久力。負値で無敵 |

---

## 3. 敵機出現DB

```python
敵機出現DB = [
    ((難易度下限, 難易度上限), [(機体ID, 出現率), ...])
]
```

- 難易度に応じて登場する敵機群を定義
- `random.choices()` の `weights` に対応した重みづけ抽選が可能

---

## 4. ボスID（ボスの識別ID）

```python
class ボスID(IntEnum):
    赤, 緑, 青   # 小ボス
    黄1, 黄2     # 中ボス
    ロボ1, ロボ2 # 大ボス
```

- ボスキャラクターを種類で識別します。

---

## 5. ボスDB

```python
ボスDB = {
    ボスID.X: (得点, (Y速度, X速度, 反転間隔), (発射間隔, 発射速度, 同時数, 角度), (弾攻撃力, 体当たり威力, シールド))
}
```

- 敵機DBとまったく同じ構造で設計されており、汎用的に扱えます。

---

## 6. ボス出現DB

```python
ボス出現DB = {
    難易度: (ボスID, ...)  # タプル形式で複数ボス出現に対応
}
```

- 難易度に応じて出現するボスキャラ群を定義
- 通常の敵機と異なり、複数体を同時に出現させるパターンも可能

---

## 7. 補足事項

- `DB.py` は敵機の定義と出現管理の中心的役割を担うデータモジュールです。
- IDは `IntEnum` により数値で管理され、他のモジュールと整合性を保っています。
- 出現管理はシンプルな構造で実現されており、ゲームバランスの調整が容易です。



---

## 8. 出現プロセスとの関係性（更新コントローラとの連携）

### 🔄 更新コントローラとは

ゲーム中の定期的な更新処理を統括する制御システムで、各種プロセス（移動・発射・出現など）を担当します。

### 🚀 出現プロセスについて

出現処理は「出現プロセス」として分離され、以下の2つのサブプロセスにより構成されます：

| サブプロセス関数     | 対象         | 対応するDB         |
|----------------------|--------------|--------------------|
| `Pアクション_敵機()` | 通常の敵機   | `敵機出現DB`       |
| `Pアクション_ボス()` | ボスキャラクター | `ボス出現DB`   |

- 両関数とも、難易度に応じて対象となる機体を抽出し、出現させる仕組みです。
- `random.choices()` を用いた重み付き抽選や、複数体出現対応などが組み込まれています。

このように、`DB.py` に定義された各種データベースは、**更新コントローラ内の出現プロセスで直接利用され、ゲーム内出現の根幹を支えています。**

