# 📘シリアル通信 コマンド一覧
---
### §ＰＷＭ出力
16チャンネルのPCA9685を**最大8個**、**最大128個**のPWM出力を制御できます。  

---
### 0. 情報
#### 0-1. 接続状況
**書式：`PWM/INFO/CONNECT`:`dev`!**
|引数|値|解説|
|----|--|----|
|－  |－|－  |

|種別|戻値   |解説             |
|----|-------|-----------------|
|正常|`XXXX!`|接続デバイス数   |
|異常|`#...!`|`Ⅰ.§戻値`を参照|


---
### 1. 基本
#### 1-1. PWM出力
**書式：`PWM/OUTPUT`:`ch_from`:`pwm_value`!**
|引数|値|解説|
|----|--|----|
|`ch_from`  |0～127 |チャンネルID(開始)|
|`pwm_value`|0～4095|出力値(PWM値)|

|種別|戻値   |解説             |
|----|-------|-----------------|
|正常|`!!!!!`|とくになし       |
|異常|`#...!`|`Ⅰ.§戻値`を参照|


---
### 2. 角度指定
#### 2-1. プリセット登録
**書式：`PWM/ANGLE/SETUP`:`ch_from`:`ch_to`:`deg_end`:`pwm_start`:`pwm_end`:`pwm_middle`!**
|引数|値|解説|
|----|--|----|
|`ch_from`   |0～127|チャンネルID(開始)|
|`ch_to`     |0～127,-1|チャンネルID(終了)|
|`deg_end`   |2～360|角度(終了)<br>(開始は0度とする)|
|`pwm_start` |0～4095|PWM値(開始)|
|`pwm_end`   |0～4095|PWM値(終了)|
|`pwm_middle`|0～4095,-1|`-1`で開始～終了の中点|

|種別|戻値   |解説             |
|----|-------|-----------------|
|正常|`!!!!!`|とくになし       |
|異常|`#...!`|`Ⅰ.§戻値`を参照|


#### 2-2. プリセット削除
**書式：`PWM/ANGLE/DELETE`:`ch_from`:`ch_to`!**
|引数|値|解説|
|----|--|----|
|`ch_from`|0～127   |チャンネルID(開始)|
|`ch_to`  |0～127,-1|チャンネルID(終了)|

|種別|戻値   |解説             |
|----|-------|-----------------|
|正常|`!!!!!`|とくになし       |
|異常|`#...!`|`Ⅰ.§戻値`を参照|

#### 2-3. PWM出力
**書式：`PWM/ANGLE/OUTPUT`:`ch`:`deg`!**
|引数|値|解説|
|----|--|----|
|`ch`   |0～127|チャンネルID|
|`angle`|0～360|出力角度    |

|種別|戻値   |解説             |
|----|-------|-----------------|
|正常|`XXXX!`|出力したPWM値    |
|異常|`#...!`|`Ⅰ.§戻値`を参照|


#### 2-3. PWM出力(中間)
**書式：`PWM/ANGLE/CENTER`:`ch`!**
|引数|値|解説|
|----|--|----|
|`ch`|0～127|チャンネルID|

|種別|戻値   |解説             |
|----|-------|-----------------|
|正常|`XXXX!`|出力したPWM値    |
|異常|`#...!`|`Ⅰ.§戻値`を参照|


---
### 3. 回転型サーボ
#### 3-1. プリセット登録
**書式：`PWM/ROTATE/SETUP`:`ch_from`:`ch_to`:`pwm_start`:`pwm_end`:`pwm_middle`!**
|引数|値|解説|
|----|--|----|
|`ch_from`   |0～127|チャンネルID(開始)|
|`ch_to`     |0～127,-1|チャンネルID(終了)|
|`pwm_start` |0～4095|PWM値(開始)|
|`pwm_end`   |0～4095|PWM値(終了)|
|`pwm_middle`|0～4095,-1|停止する値<br>`-1`で開始～終了の中点|

|種別|戻値   |解説             |
|----|-------|-----------------|
|正常|`!!!!!`|とくになし       |
|異常|`#...!`|`Ⅰ.§戻値`を参照|


#### 3-2. プリセット削除
**書式：`PWM/ROTATE/DELETE`:`ch_from`:`ch_to`!**
|引数|値|解説|
|----|--|----|
|`ch_from`|0～127   |チャンネルID(開始)|
|`ch_to`  |0～127,-1|チャンネルID(終了)|

|種別|戻値   |解説             |
|----|-------|-----------------|
|正常|`!!!!!`|とくになし       |
|異常|`#...!`|`Ⅰ.§戻値`を参照|

#### 3-3. PWM出力
**書式：`PWM/ROTATE/OUTPUT`:`ch`:`deg`!**
|引数|値|解説|
|----|--|----|
|`ch`  |0～127   |チャンネルID|
|`Rate`|-100～100|逆転～正転のパーセンテージ<br>(値はオフセット処理)|

|種別|戻値   |解説             |
|----|-------|-----------------|
|正常|`XXXX!`|出力したPWM値    |
|異常|`#...!`|`Ⅰ.§戻値`を参照|